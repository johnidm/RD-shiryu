
(function(global){const Seyia=function(){const serverUrl="http://localhost:5000/track/";let getOrCreateGUID=function(){const keyStorage="seyia-guid";function getNewGUID(){function S4(){return((1+Math.random())*65536|0).toString(16).substring(1)}return guid=(S4()+S4()+"-"+S4()+"-4"+S4().substr(0,3)+"-"+S4()+"-"+S4()+S4()+S4()).toLowerCase()}let guid=sessionStorage.getItem(keyStorage);if(guid===null||guid===undefined){guid=getNewGUID();sessionStorage.setItem(keyStorage,guid)}return guid};let httpPost=function(trackPath,data){const guid=getOrCreateGUID();const url=serverUrl+trackPath+"/"+guid;const xhttp=new XMLHttpRequest;xhttp.open("POST",url,true);xhttp.setRequestHeader("Content-Type","application/json");xhttp.send(JSON.stringify(data));xhttp.onreadystatechange=function(){if(xhttp.status!==204){console.error(xhttp)}}};return{storeUrl(url){const title=document.title;const data={title:title,url:url,date:new Date};httpPost("url",data)},setEmail(email){const data={email:email};httpPost("email",data)},get guid(){return getOrCreateGUID()}}};if(typeof module!="undefined"){module.exports=Seyia}else{global.Seyia=Seyia}})(this);